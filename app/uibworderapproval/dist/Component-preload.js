//@ui5-bundle uibworderapproval/Component-preload.js
sap.ui.predefine("uibworderapproval/Component", ["sap/fe/core/AppComponent"],function(e){"use strict";return e.extend("uibworderapproval.Component",{metadata:{manifest:"json"}})});
sap.ui.predefine("uibworderapproval/ext/controller/OrderList", ["sap/m/MessageToast","sap/m/MessageBox"],function(e,t){"use strict";return{onBulkApproval:async function(e,t){if(!t||t.length===0){sap.m.MessageBox.warning("Please select at least one order.");return}const s=t[0].getModel();const a=t.map(e=>e.getObject());const r=a.map(e=>({orderNumber:e.orderNumber,itemNumber:e.itemNumber}));const o=a.length;const n=function(e){let t=[];if(!e)return t;if(e.aFilters&&e.aFilters.length>0){e.aFilters.forEach(e=>{t=t.concat(n(e))})}else if(e.sPath){t.push({path:e.sPath,operator:e.sOperator,value1:e.oValue1,value2:e.oValue2})}return t};const l=this.getFilters();let i=[];if(l.filters&&l.filters.length>0){i=n(l.filters[0])}var d=new sap.m.CheckBox({text:"Approve Load",width:"100%",selected:true});var c=new sap.m.ComboBox({width:"100%",placeholder:"Select Reason Code...",enabled:!d.getSelected(),required:!d.getSelected(),items:{path:"/reasonCodeVH",template:new sap.ui.core.ListItem({key:"{reasonCode}",text:"{reasonCode} - {description}"})}});d.attachSelect(function(e){var t=e.getParameter("selected");c.setEnabled(!t);c.setRequired(!t);if(t){c.setSelectedKey("")}});var p=new sap.m.CheckBox({text:"Apply on all filtered orders",design:"Bold",width:"90%",selected:false});var u=new sap.m.Label({text:"Selected Orders: "+o,width:"100%",visible:!p.getSelected()});p.attachSelect(function(e){u.setVisible(!e.getParameter("selected"))});var m=new sap.m.VBox({width:"100%",items:[d,new sap.m.Label({text:"Reason Code",design:"Bold"}),c,u,p],class:"sapUiSmallMargin sapUiMediumPadding"});var f=new sap.m.Dialog({title:"Bulk Approval",contentWidth:"400px",type:"Message",content:[m],beginButton:new sap.m.Button({text:"Confirm",type:"Emphasized",press:async function(){var e=d.getSelected();var t=c.getSelectedKey();var a=p.getSelected();if(!e&&!t){sap.m.MessageBox.warning("Reason Code is required when rejecting the order.");return}try{function n(e,t){const s=[];for(let a=0;a<e.length;a+=t){s.push(e.slice(a,a+t))}return s}const l=n(r,200);for(const u of l){var o=s.bindContext("/approveOrders(...)");o.setParameter("orders",u);o.setParameter("approveLoad",e);o.setParameter("reasonCode",e?"":t);o.setParameter("filters",JSON.stringify(i));o.setParameter("allSelected",a);await o.execute()}sap.m.MessageToast.show("Orders processed successfully.");s.refresh()}catch(m){console.error("Bulk approval failed:",m);sap.m.MessageBox.error("Bulk approval failed: "+(m.message||"Unknown error"))}finally{f.close()}}}),endButton:new sap.m.Button({text:"Cancel",press:function(){f.close()}}),afterClose:function(){f.destroy()}});f.setModel(s);f.addStyleClass("sapUiContentPadding sapUiSizeCompact");f.open()}}});
sap.ui.require.preload({
	"uibworderapproval/ext/fragments/ApprovalStats.fragment.xml":'<core:FragmentDefinition\n    xmlns:core="sap.ui.core"\n    xmlns="sap.m"\n    xmlns:f="sap.f"\n    xmlns:card="sap.f.cards"><VBox class="sapUiSmallMargin"><HBox class="sapUiSmallMarginBottom"><items><f:Card width="250px" class="sapUiTinyMarginEnd"><f:header><card:NumericHeader\n                            title="Total Orders"\n                            number="{stats>/totalOrders}"\n                            state="None"\n                            iconSrc="sap-icon://order-status" /></f:header></f:Card><f:Card width="250px" class="sapUiTinyMarginEnd"><f:header><card:NumericHeader\n                            title="Approved Orders"\n                            number="{stats>/approvedOrders}"\n                            state="Success"\n                            iconSrc="sap-icon://accept" /></f:header></f:Card><f:Card width="250px" class="sapUiTinyMarginEnd"><f:header><card:NumericHeader\n                            title="Rejected Orders"\n                            number="{stats>/rejectedOrders}"\n                            state="Error"\n                            iconSrc="sap-icon://decline" /></f:header></f:Card><f:Card width="250px"><f:header><card:NumericHeader\n                            title="Pending Orders"\n                            number="{stats>/pendingOrders}"\n                            state="Warning"\n                            iconSrc="sap-icon://pending" /></f:header></f:Card></items></HBox></VBox></core:FragmentDefinition>',
	"uibworderapproval/i18n/i18n.properties":'# This is the resource bundle for uibworderapproval\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=Mass Order Approval\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n\n#XFLD,57\nsem_bworders-display.flpTitle=Mass Order Approval\n',
	"uibworderapproval/manifest.json":'{"_version":"1.76.0","sap.app":{"id":"uibworderapproval","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:lrop","version":"1.19.5","toolsId":"e09812ef-e52d-4397-9cc3-494f27824f43"},"dataSources":{"mainService":{"uri":"odata/v4/my-order-approval/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}},"crossNavigation":{"inbounds":{"sem_bworders-display":{"semanticObject":"sem_bworders","action":"display","title":"{{sem_bworders-display.flpTitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.142.0","libs":{"sap.m":{},"sap.ui.core":{},"sap.fe.templates":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"uibworderapproval.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}},"@i18n":{"type":"sap.ui.model.resource.ResourceModel","uri":"i18n/i18n.properties","settings":{"supportedLocales":[""]}}},"resources":{"css":[]},"routing":{"config":{},"routes":[{"pattern":":?query:","name":"OrdersList","target":"OrdersList"},{"pattern":"Orders({key}):?query:","name":"OrdersObjectPage","target":"OrdersObjectPage"}],"targets":{"OrdersList":{"type":"Component","id":"OrdersList","name":"sap.fe.templates.ListReport","options":{"settings":{"contextPath":"/Orders","variantManagement":"Page","navigation":{"Orders":{"detail":{"route":"OrdersObjectPage"}}},"controlConfiguration":{"@com.sap.vocabularies.UI.v1.LineItem":{"tableSettings":{"type":"GridTable"},"actions":{"bulkapproval":{"press":"uibworderapproval.ext.controller.OrderList.onBulkApproval","visible":true,"enabled":true,"requiresSelection":true,"text":"Mass Approval"}}}},"initialLoad":"Enabled"}}},"OrdersObjectPage":{"type":"Component","id":"OrdersObjectPage","name":"sap.fe.templates.ObjectPage","options":{"settings":{"editableHeaderContent":false,"contextPath":"/Orders"}}}}},"flexBundle":false},"sap.fiori":{"registrationIds":[],"archeType":"transactional"},"sap.cloud":{"public":true,"service":"bworderapproval.service"}}'
});
//# sourceMappingURL=Component-preload.js.map
